# Ganesh

Проект Ganesh состоит из двух модулей: `app1` и `app2`. Эти модули взаимодействуют через Apache Kafka и базу данных для обработки запросов и управления их статусами.

---

## Модули

### app1 (Бэкенд)

**Описание:**
`app1` — это бэкенд-приложение, которое:
1. Принимает POST-запросы с данными.
2. Отправляет данные в топик Kafka.
3. Сохраняет запрос в базу данных.
4. Читает и обновляет статус запроса.

**Функциональность:**
- **REST API**:
    - `POST /api/send`: Принимает JSON-сообщение и отправляет его в Kafka.
        - Пример запроса:
          ```json
          {"message": "Hello, Kafka! 2025-03-16 10-55-00"}
          ```
        - Ответ: ID запроса.
    - `GET /api/request/{id}`: Возвращает информацию о запросе по его ID (данные из базы данных и Kafka).

- **Kafka**:
    - Отправляет сообщения в топик `requests`.

- **База данных**:
    - Сохраняет запросы в таблицу `requests`.
    - Обновляет статус запроса в таблице `processed_requests`.

---

### app2 (Потребитель Kafka)

**Описание:**
`app2` — это приложение, которое:
1. Читает сообщения из топика Kafka.
2. Сохраняет данные в базу данных.
3. Отправляет статус обработки в статусный топик Kafka.

**Функциональность:**
- **Kafka Consumer**:
    - Подписывается на топик `requests`.
    - Обрабатывает сообщения и сохраняет их в таблицу `processed_requests`.

- **База данных**:
    - Сохраняет обработанные запросы в таблицу `processed_requests`.

- **Kafka Producer**:
    - Отправляет статус обработки в топик `status-topic`.

---

## Взаимодействие

1. Пользователь отправляет POST-запрос в `app1` через REST API.
2. `app1` сохраняет запрос в базу данных и отправляет его в топик Kafka `requests`.
3. `app2` читает сообщение из топика `requests`, обрабатывает его и сохраняет результат в базу данных.
4. `app2` отправляет статус обработки в топик `status-topic`.
5. Пользователь может запросить статус обработки через `GET /api/request/{id}` в `app1`.

---

## Технологии

- **Язык программирования**: Java
- **Фреймворки**: Spring Boot, Spring Kafka, Spring Data JPA
- **База данных**: PostgreSQL
- **Брокер сообщений**: Apache Kafka
- **Логирование**: Logback/SLF4J

---

## Запуск проекта

1. Убедитесь, что установлены:
    - Java 17+
    - Apache Kafka
    - PostgreSQL

2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/IgorP17/Ganesh.git
   cd Ganesh