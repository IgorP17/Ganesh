–ß—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å Zookeeper –∏ Kafka –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å systemd-—Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∑–∞–ø—É—Å–∫–æ–º, –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Linux.
1. –°–æ–∑–¥–∞–Ω–∏–µ systemd-—Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Zookeeper

--sudo adduser kafka –Ω–∞—Ñ–∏–≥
--id kafka
--sudo chown -R kafka:kafka /home/igor/Downloads/kafka_2.12-3.9.0
--sudo chmod +x /home/igor/Downloads/kafka_2.12-3.9.0/bin/*.sh

    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Zookeeper:
    bash
    Copy

    sudo nano /etc/systemd/system/zookeeper.service

    –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ):
    ini
    Copy

    [Unit]
    Description=Apache Zookeeper
    After=network.target

    [Service]
    Type=simple
    User=kafka -- –ù–ï–¢ igor AAAAAAAAAAAAAAAAAAA
    ExecStart=/home/igor/Downloads/kafka_2.12-3.9.0/bin/zookeeper-server-start.sh /home/igor/Downloads/kafka_2.12-3.9.0/config/zookeeper.properties
    ExecStop=/home/igor/Downloads/kafka_2.12-3.9.0/bin/zookeeper-server-stop.sh
    Restart=on-abnormal

    [Install]
    WantedBy=multi-user.target

        –ó–∞–º–µ–Ω–∏—Ç–µ /home/igor/Downloads/kafka_2.12-3.9.0 –Ω–∞ –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Kafka.

        –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å kafka –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º Kafka.

    –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –∏ –≤—ã–π–¥–∏—Ç–µ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (Ctrl+O, –∑–∞—Ç–µ–º Ctrl+X).

    –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
    bash
    Copy

    sudo systemctl daemon-reload

    –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Zookeeper:
    bash
    Copy

    sudo systemctl enable zookeeper

    –ó–∞–ø—É—Å—Ç–∏—Ç–µ Zookeeper:
    bash
    Copy

    sudo systemctl start zookeeper

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:
    bash
    Copy

    sudo systemctl status zookeeper

2. –°–æ–∑–¥–∞–Ω–∏–µ systemd-—Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Kafka

    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Kafka:
    bash
    Copy

    sudo nano /etc/systemd/system/kafka.service

    –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ):
    ini
    Copy

    [Unit]
    Description=Apache Kafka
    After=network.target zookeeper.service

    [Service]
    Type=simple
    User=igor
    ExecStart=/home/igor/Downloads/kafka_2.12-3.9.0/bin/kafka-server-start.sh /home/igor/Downloads/kafka_2.12-3.9.0/config/server.properties
    ExecStop=/home/igor/Downloads/kafka_2.12-3.9.0/bin/kafka-server-stop.sh
    Restart=on-abnormal

    [Install]
    WantedBy=multi-user.target

        –ó–∞–º–µ–Ω–∏—Ç–µ /home/igor/Downloads/kafka_2.12-3.9.0 –Ω–∞ –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Kafka.

        –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å kafka –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º Kafka.

    –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –∏ –≤—ã–π–¥–∏—Ç–µ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (Ctrl+O, –∑–∞—Ç–µ–º Ctrl+X).

    –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
    bash
    Copy

    sudo systemctl daemon-reload

    –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Kafka:
    bash
    Copy

    sudo systemctl enable kafka

    –ó–∞–ø—É—Å—Ç–∏—Ç–µ Kafka:
    bash
    Copy

    sudo systemctl start kafka

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:
    bash
    Copy

    sudo systemctl status kafka

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
---------- here ----------
    –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:
    bash
    Copy

    sudo reboot

    –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
    bash
    Copy

    sudo systemctl status zookeeper
    sudo systemctl status kafka

    –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã.

4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

    –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
    bash
    Copy

    sudo systemctl start zookeeper
    sudo systemctl start kafka

    –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞:
    bash
    Copy

    sudo systemctl stop zookeeper
    sudo systemctl stop kafka

    –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
    bash
    Copy

    sudo systemctl restart zookeeper
    sudo systemctl restart kafka

    –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
    bash
    Copy

    sudo systemctl status zookeeper
    sudo systemctl status kafka

–ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å Zookeeper –∏ Kafka –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã. –í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã systemctl. –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã, –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å! üòä
